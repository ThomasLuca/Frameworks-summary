<!doctype html>
<html >
<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!--[if lt IE 9]>
                <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
        <![endif]-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <!-- <link rel="stylesheet" type="text/css" href="template.css" /> -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/template.css" />

    <link href="https://vjs.zencdn.net/5.4.4/video-js.css" rel="stylesheet" />

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <!-- <script type='text/javascript' src='menu/js/jquery.cookie.js'></script> -->
    <!-- <script type='text/javascript' src='menu/js/jquery.hoverIntent.minified.js'></script> -->
    <!-- <script type='text/javascript' src='menu/js/jquery.dcjqaccordion.2.7.min.js'></script> -->

    <!-- <link href="menu/css/skins/blue.css" rel="stylesheet" type="text/css" /> -->
    <!-- <link href="menu/css/skins/graphite.css" rel="stylesheet" type="text/css" /> -->
    <!-- <link href="menu/css/skins/grey.css" rel="stylesheet" type="text/css" /> -->
  
    <!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
        
  
    <!-- <script src="script.js"></script> -->
  
    <!-- <script src="jquery.sticky-kit.js "></script> -->
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.cookie.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.hoverIntent.minified.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.dcjqaccordion.2.7.min.js'></script>

    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/blue.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/graphite.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/grey.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/ryangrose/easy-pandoc-templates@948e28e5/css/elegant_bootstrap.css" rel="stylesheet" type="text/css" />
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
    <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/script.js"></script>
  
    <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/jquery.sticky-kit.js"></script>
    <meta name="generator" content="pandoc" />
  <title>Frameworks summary</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>

    
    <div class="navbar navbar-static-top">
    <div class="navbar-inner">
      <div class="container">
        <span class="doc-title">Frameworks summary</span>
        <ul class="nav pull-right doc-info">
                            </ul>
      </div>
    </div>
  </div>
    <div class="container">
    <div class="row">
            <div id="TOC" class="span3">
        <div class="well toc">

        <ul>
        <li><a href="#frameworks-summary"
        id="toc-frameworks-summary">Frameworks summary</a>
        <ul>
        <li><a href="#rest" id="toc-rest">1. REST</a>
        <ul>
        <li><a href="#http-refresher" id="toc-http-refresher">1.1 HTTP
        refresher</a></li>
        <li><a href="#rest-webservices" id="toc-rest-webservices">1.2
        Rest webservices</a></li>
        <li><a href="#rest-webservices-java-springboot"
        id="toc-rest-webservices-java-springboot">1.3 Rest webservices:
        Java (<em>Springboot</em>)</a></li>
        <li><a href="#testing-webservices"
        id="toc-testing-webservices">1.4 Testing webservices</a></li>
        <li><a href="#webservices-security"
        id="toc-webservices-security">1.5 Webservices security</a></li>
        </ul></li>
        <li><a href="#orm" id="toc-orm">2. ORM</a>
        <ul>
        <li><a href="#orm-object-relational-mapping"
        id="toc-orm-object-relational-mapping">2.1 ORM: Object
        Relational Mapping</a></li>
        <li><a href="#jpa-in-spring" id="toc-jpa-in-spring">2.2 JPA in
        Spring</a></li>
        </ul></li>
        </ul></li>
        </ul>

        </div>
      </div>
            <div class="span9">

      
      <h1 id="frameworks-summary">Frameworks summary</h1>
<h2 id="rest">1. REST</h2>
<h3 id="http-refresher">1.1 HTTP refresher</h3>
<ul>
<li>Client-server protocol</li>
<li>Transport protocol: TCP on port 80</li>
<li>Request-response</li>
</ul>
<h4 id="http-request">HTTP Request</h4>
<p>Request types:</p>
<ul>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
<li>HEAD</li>
<li>OPTIONS</li>
</ul>
<p>Statuscodes:</p>
<ul>
<li>1xx: Informative</li>
<li>2xx: Success</li>
<li>3xx: Redirection</li>
<li>4xx: Client error</li>
<li>5xx: Server error</li>
</ul>
<h3 id="rest-webservices">1.2 Rest webservices</h3>
<p>REST stands for Representational State Transfer. It‚Äôs an
architectural style used for designing networked applications,
especially web services. REST relies on a client-server architecture
where the client interacts with the server via requests to access and
manipulate resources on the server</p>
<ul>
<li><strong>Client-server</strong></li>
<li><strong>Stateless</strong>: server doesn‚Äôt store any client
context</li>
<li><strong>Uniform interface</strong>: independent of type of
client</li>
<li><strong>Cacheable</strong>: responses from REST service can specify
to cache for a specified period. (using the <code>Cache-Control</code>
header field)</li>
<li><strong>Layered system</strong>: client doesn‚Äôt now which layer it
is connected to</li>
<li><strong>Code on demand</strong>: Content of message can also be
code</li>
<li>Resource-based: can be any data or service that the app exposes,
resources is identifiable via a URI</li>
<li>CRUD operations: Must support GET, POST, PUT, DELETE methods.</li>
<li>Representational resources: could be represented by multiple
representations (JSON, XML, ‚Ä¶)</li>
</ul>
<h4 id="uri-uniform-resource-identifier">URI (Uniform Resource
Identifier)</h4>
<p>URI‚Äôs are hierarchical structures that represent a resource on which
CRUD actions can be performed.</p>
<p>hierarchical:
<code>http://www.myservice.org/discussions/{year}/{day}/{month}/{topic}</code></p>
<p>It is also possible to add parameters to the URI to filter or sort on
a resources:
<code>http://www.myservice.org/discussions?region=USA&amp;year=2023</code></p>
<h4 id="glory-of-rest">Glory of REST</h4>
<figure>
<img src="./img/glory-of-rest.png" alt="Glory of REST" />
<figcaption aria-hidden="true">Glory of REST</figcaption>
</figure>
<h5 id="level-0-the-swamp-of-pox">Level 0: The swamp of pox</h5>
<ul>
<li>One endpoint</li>
<li>HTTP only as transport</li>
<li>Remote procedure invocation
(<code>POST &lt;openSlotRequest</code>)</li>
</ul>
<h5 id="level-1-resources">Level 1: Resources</h5>
<ul>
<li>Multiple endpoints</li>
<li>Arguments in body (<code>POST &lt;appointmentRequest</code>)</li>
</ul>
<h5 id="level-2-http-methods">Level 2: HTTP-methods</h5>
<ul>
<li>HTTP-methods as CRUD (<code>GET ?date=20231224</code>)</li>
<li>HTTP-statuscodes as response
(<code>200 OK &lt;openSlotList</code>)</li>
</ul>
<h5 id="level-3-hypermedia-controls">Level 3: Hypermedia controls</h5>
<ul>
<li>HATEOAS (Hypertext As The Engine Of Application State)</li>
<li>Links to other resources in response</li>
<li>Selfdocumenting protocol</li>
</ul>
<h3 id="rest-webservices-java-springboot">1.3 Rest webservices: Java
(<em>Springboot</em>)</h3>
<p><strong>Why springboot?</strong></p>
<p>Spring avoids a lot of manual configuration and is easy to manage
dependently.</p>
<h4 id="spring-architecture">Spring architecture</h4>
<figure>
<img src="./img/spring-architecture.png"
alt="Architecture REST API in Spring" />
<figcaption aria-hidden="true">Architecture REST API in
Spring</figcaption>
</figure>
<ol type="1">
<li>Spring-framework receives HTTP-req and determines which
<em>method</em> of which <em>controller</em> has to get called.</li>
<li>(Opt) Convert JSON in body to specific object</li>
<li>(Opt) Validate input values of object</li>
<li>Call method of <em>controller</em> with object as param</li>
<li><em>Controller</em> calls underlying logic</li>
<li>Logic interacts with data-layer</li>
<li>Result of <em>controller</em> gets serialized to JSON</li>
<li>HTTP-response gets generated (possibly with JSON-object in
body)</li>
</ol>
<h4 id="get-controller">GET controller</h4>
<div class="sourceCode" id="cb1"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">springframework</span><span class="op">.</span><span class="im">web</span><span class="op">.</span><span class="im">bind</span><span class="op">.</span><span class="im">annotation</span><span class="op">.*;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">@RestController</span> <span class="co">// Indicate that this class is a RestController</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">@RequestMapping</span><span class="op">(</span><span class="st">&quot;agenda&quot;</span><span class="op">)</span> <span class="co">//The path to access agendas (eg: localhost:8080/agenda)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> AgendaController <span class="op">{</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> Agenda agenda<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  pubic <span class="fu">AgendaController</span><span class="op">(</span>Agenda agenda<span class="op">)</span> <span class="op">{</span> <span class="kw">this</span><span class="op">.</span><span class="fu">agenda</span> <span class="op">=</span> agenda<span class="op">;</span> <span class="op">}</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">@GetMapping</span> <span class="co">// Indicate that method handles Get-requests</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="bu">Collection</span><span class="op">&lt;</span>AgendaItem<span class="op">&gt;</span> <span class="fu">agendaFromNow</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> agenda<span class="op">.</span><span class="fu">getAgendaItem</span><span class="op">(</span><span class="kw">new</span> <span class="bu">Date</span><span class="op">());</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li><code>@RestController</code>:
<ul>
<li>Normal class</li>
<li>Wrapped in a <code>serverlet</code></li>
<li>REST-service</li>
</ul></li>
<li><code>@RequestMapping</code>:
<ul>
<li>Specifies which path a REST-service needs to handle.</li>
</ul></li>
<li><code>@GetMapping</code>:
<ul>
<li>Specifies which HTTP-method a method response to</li>
<li>Result is automatically converted to JSON</li>
<li>Can have a path as parameter (eg
<code>GetMapping("/id/{id}")</code>)
<ul>
<li>Param can be retrieved using <code>@RequestParam("id")</code></li>
</ul></li>
</ul></li>
<li><code>@PostMapping</code>:
<ul>
<li>Body can be retrieved using
<code>@RequestBody AgendaItem item</code></li>
</ul></li>
</ul>
<h5 id="dependency-injection">Dependency injection</h5>
<p>DI is needed to make the Agenda class (dependency) available to the
to <code>RestController</code>.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Component</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Agenda <span class="op">{</span><span class="kw">...</span><span class="op">}</span></span></code></pre></div>
<h5 id="method-response-status">Method response status</h5>
<p>A REST-method typically returns a <code>ResponseEntity</code> (along
with a message).</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="at">@GetMapping</span><span class="op">(</span><span class="st">&quot;/age&quot;</span><span class="op">)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ResponseEntity<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> <span class="fu">age</span><span class="op">(</span><span class="at">@RequestParam</span><span class="op">(</span><span class="st">&quot;yearOfBirth&quot;</span><span class="op">)</span> <span class="dt">int</span> yearOfBirth<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(</span><span class="fu">invalidAge</span><span class="op">(</span>yearOfBirth<span class="op">))</span> <span class="op">{</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> ResponseEntity<span class="op">&lt;&gt;(</span><span class="st">&quot;Invalid year of birth&quot;</span><span class="op">,</span> HttpStatus<span class="op">.</span><span class="fu">BAD_REQUEST</span><span class="op">);</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> ResponseEntity<span class="op">&lt;&gt;(</span><span class="st">&quot;YOB is &quot;</span> <span class="op">+</span> yearOfBirth<span class="op">,</span> HttpStatus<span class="op">.</span><span class="fu">OK</span><span class="op">);</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>It is also possible to couple a statuscode to an exception:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="at">@ResponseStatus</span><span class="op">(</span>code <span class="op">=</span> HttpStatus<span class="op">.</span><span class="fu">BAD_REQUEST</span><span class="op">)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> CustomException <span class="kw">extends</span> <span class="bu">RuntimeException</span> <span class="op">{}</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="at">@PostMapping</span><span class="op">()</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">@ResponseStatus</span><span class="op">(</span>HttpStatus<span class="op">.</span><span class="fu">CREATED</span><span class="op">)</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">storeEmployee</span><span class="op">(</span><span class="at">@RequestBody</span> Employee employee<span class="op">)</span> <span class="op">{</span><span class="kw">...</span><span class="op">}</span></span></code></pre></div>
<p>Here the <code>ResponseStatus</code> will automatically return a 201
if the creation of employee was successful.</p>
<p>Finally it is also common to respond with a URI.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="at">@PostMapping</span><span class="op">(</span><span class="st">&quot;/user/{username}&quot;</span><span class="op">)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">Void</span><span class="op">&gt;</span> <span class="fu">createTodo</span><span class="op">(</span><span class="at">@PathVariable</span> <span class="bu">String</span> username<span class="op">,</span> <span class="at">@RequestBody</span> Todo todo<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  todo<span class="op">.</span><span class="fu">setUsername</span><span class="op">(</span>username<span class="op">);</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  Todo createdTodo <span class="op">=</span> toJpaRepo<span class="op">.</span><span class="fu">save</span><span class="op">(</span>todo<span class="op">);</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">URI</span> uri <span class="op">=</span> ServletUriComponentsBuilder<span class="op">.</span><span class="fu">fromCurrentRequest</span><span class="op">()</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">path</span><span class="op">(</span><span class="st">&quot;/id&quot;</span><span class="op">).</span><span class="fu">buildAndExpand</span><span class="op">(</span>createdTodo<span class="op">.</span><span class="fu">getId</span><span class="op">()).</span><span class="fu">toUri</span><span class="op">();</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ResponseEntity<span class="op">.</span><span class="fu">created</span><span class="op">(</span>uri<span class="op">).</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="testing-webservices">1.4 Testing webservices</h3>
<h4 id="unit-tests-junit">Unit tests (Junit)</h4>
<p><strong>Fixture</strong>:</p>
<ul>
<li>Fixed context</li>
<li>baseline state</li>
</ul>
<p>Four phases:</p>
<ol type="1">
<li>Setup: Prepare text fixture</li>
<li>Exercise: Interact with system to research</li>
<li>Verify: Verify if it behaves as expected</li>
<li>Tear down: Break down text fixture to original state</li>
</ol>
<div class="sourceCode" id="cb7"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="at">@ExtendWith</span><span class="op">(</span>SpringExtension<span class="op">.</span><span class="fu">class</span><span class="op">)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">@SpringBootTest</span><span class="op">(</span>webEnvironment <span class="op">=</span> WebEnvironment<span class="op">.</span><span class="fu">RANDOM_PORT</span><span class="op">)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="at">@AutoConfigureWebTestClient</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">@ActiveProfile</span><span class="op">(</span><span class="st">&quot;test&quot;</span><span class="op">)</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> RestAgendaApplicationTest <span class="op">{</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">@Autowired</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> WebTestClient webClient<span class="op">;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">@Test</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">testGetAllRepos</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    WebTestClient<span class="op">.</span><span class="fu">get</span><span class="op">().</span><span class="fu">uri</span><span class="op">(</span><span class="st">&quot;/api/repos&quot;</span><span class="op">)</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">accept</span><span class="op">(</span>MediaType<span class="op">.</span><span class="fu">APPLICATION_JSON_UTF8</span><span class="op">)</span>  <span class="co">// Set header</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">exchange</span><span class="op">()</span>                               <span class="co">// Send message</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">expectStatus</span><span class="op">().</span><span class="fu">isOk</span><span class="op">()</span>                    <span class="co">// Check status</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">expectHeader</span><span class="op">().</span><span class="fu">contentType</span><span class="op">(</span>MediaType<span class="op">.</span><span class="fu">APPLICATION_JSON_UTF8</span><span class="op">)</span> <span class="co">// Check header</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">expectedBodyList</span><span class="op">(</span>Repo<span class="op">.</span><span class="fu">class</span><span class="op">)</span>             <span class="co">// Check body</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The <code>@ActiveProfile</code> annotation is optional but is very
useful. It let‚Äôs us use a different bean configured specifically for
testing purposes.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Component</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="at">@Profile</span><span class="op">(</span><span class="st">&quot;test&quot;</span><span class="op">)</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> DummyDao <span class="kw">implements</span> Dao <span class="op">{</span><span class="kw">...</span><span class="op">}</span></span></code></pre></div>
<h3 id="webservices-security">1.5 Webservices security</h3>
<h4 id="authentication">Authentication</h4>
<p>Configure login information</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Configuration</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="at">@EnableWebSecurity</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> SecurityConfig <span class="op">{</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">@Bean</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> UserDetailsService <span class="fu">userDetailsService</span><span class="op">(</span>BCryptPasswordEncoder bCryptPasswordEncoder<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    InMemoryUserDetailsManager manager <span class="op">=</span> <span class="kw">new</span> <span class="fu">InMemoryUserDetailsManager</span><span class="op">();</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    manager<span class="op">.</span><span class="fu">createUser</span><span class="op">(</span>User<span class="op">.</span><span class="fu">withUsername</span><span class="op">(</span><span class="st">&quot;user&quot;</span><span class="op">)</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">password</span><span class="op">(</span>bCryptPasswordEncoder<span class="op">.</span><span class="fu">encode</span><span class="op">(</span><span class="st">&quot;userPass&quot;</span><span class="op">))</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">roles</span><span class="op">(</span><span class="st">&quot;USER&quot;</span><span class="op">)</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">build</span><span class="op">());</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    manager<span class="op">.</span><span class="fu">createUser</span><span class="op">(</span>User<span class="op">.</span><span class="fu">withUsername</span><span class="op">(</span><span class="st">&quot;admin&quot;</span><span class="op">)</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">password</span><span class="op">(</span>bCryptPasswordEncoder<span class="op">.</span><span class="fu">encode</span><span class="op">(</span><span class="st">&quot;adminPass&quot;</span><span class="op">))</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">roles</span><span class="op">(</span><span class="st">&quot;USER&quot;</span><span class="op">,</span> <span class="st">&quot;ADMIN&quot;</span><span class="op">)</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">build</span><span class="op">());</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> manager<span class="op">;</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="authorization">Authorization</h4>
<p>Assign roles to users and restrict certain roles from performing
certain actions.</p>
<figure>
<img src="./img/authorization.png" alt="Authorization" />
<figcaption aria-hidden="true">Authorization</figcaption>
</figure>
<p><strong>Allow certain roles webservice:</strong>
(<code>anyRequest()</code>)</p>
<p><strong>Allow certain roles on some paths:</strong>
(<code>requestMatchers(path)</code>)</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Configuration</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="at">@EnableWebSecurity</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> SecurityConfig <span class="op">{</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">@Bean</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> SecurityFilterChain <span class="fu">securityFilterChain</span><span class="op">(</span>HttpSecurity http<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    http</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">authorizeHttpRequests</span><span class="op">((</span>authz<span class="op">)</span> <span class="op">-&gt;</span> authz</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">requestMatchers</span><span class="op">(</span><span class="st">&quot;/api/admin/**&quot;</span><span class="op">).</span><span class="fu">hasRole</span><span class="op">(</span><span class="st">&quot;ADMIN&quot;</span><span class="op">)</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">requestMatchers</span><span class="op">(</span><span class="st">&quot;/api/user/**&quot;</span><span class="op">).</span><span class="fu">hasRole</span><span class="op">(</span><span class="st">&quot;USER&quot;</span><span class="op">)</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">anyRequest</span><span class="op">().</span><span class="fu">authenticated</span><span class="op">()</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>      <span class="op">);</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> http<span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Allow certain roles on some webservice methods:</strong>
(<code>@EnableMethodSecurity()</code>)</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Configuration</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="at">@EnableMethodSecurity</span><span class="op">(</span>prePostEnabled <span class="op">=</span> <span class="kw">true</span><span class="op">,</span> securedEnabled <span class="op">=</span> <span class="kw">true</span><span class="op">,</span> jsr250Enabled <span class="op">=</span> <span class="kw">true</span><span class="op">)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> SecurityConfig <span class="op">{</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">@RolesAllowed</span><span class="op">(</span><span class="st">&quot;ROLE_VIEWER&quot;</span><span class="op">)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getUser</span><span class="op">();</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">@RolesAllowed</span><span class="op">({</span> <span class="st">&quot;ROLE_ADMIN&quot;</span><span class="op">,</span> <span class="st">&quot;ROLE_EDITOR&quot;</span> <span class="op">})</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">deleteUser</span><span class="op">();</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="csrf-cross-site-request-forgery">CSRF: Cross Site Request
Forgery</h4>
<p>CSRF is an attack where an attacker tricks a user‚Äôs browser into
making an unintended and unauthorized request to a different website,
exploiting the user‚Äôs authenticated session.</p>
<p><strong>How to defend against CSRF?</strong></p>
<p>Make distinction between real and fake HTTP-request by using a
<strong>Synchronizer Token Pattern</strong> or
<strong>SameSite-attribute cookie</strong>.</p>
<p>Both methods generate a token for the client on login. Then every
time the client interacts with the server, the client includes that
token in its request. On every request, the server will validate if it
received a valid token. These tokens have a certain expiration date to
avoid problems upon token theft.</p>
<blockquote>
<p>üí°: In Spring, CSRF security is enabled by default.</p>
</blockquote>
<hr />
<h2 id="orm">2. ORM</h2>
<h3 id="orm-object-relational-mapping">2.1 ORM: Object Relational
Mapping</h3>
<p>ORM is a programming technique that allows devs to work with objects
in the code while transparently persisting and retrieving data from a
relational database. It allows devs to define how objects/classes map to
database tables and vice versa. Each object corresponds to a table in
the database.</p>
<h4 id="object-relational-impedance-mismatch">Object-relational
impedance mismatch</h4>
<p>There are a lot of concepts in OOP that resembles the structure of
Relational databases: - Identities - Relations - Inheritance</p>
<p>There are a couple requirements to be able to map an object to a
DB.</p>
<ol type="1">
<li>Object must have same <em>Primary Key</em> as DB table.</li>
<li>Relationships should be the same</li>
<li>Each field of the object should map to column in the database</li>
</ol>
<h4 id="orm-in-java">ORM in java</h4>
<p>Using the <em>JPA (Java Persistence API)</em>. Every dataclass must
be a Java Bean.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="at">@Entity</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="at">@Table</span><span class="op">(</span>name <span class="op">=</span> <span class="st">&quot;sportclub&quot;</span><span class="op">)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Sportclub <span class="op">{</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="bu">Long</span> id<span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="bu">String</span> name<span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">@Id</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">@GeneratedValue</span><span class="op">(</span>strategy<span class="op">=</span>GenerationType<span class="op">.</span><span class="fu">IDENTITY</span><span class="op">)</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="bu">Long</span> <span class="fu">getId</span><span class="op">()</span> <span class="op">{</span> <span class="cf">return</span> id<span class="op">;</span> <span class="op">}</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setId</span><span class="op">(</span><span class="bu">Long</span> id<span class="op">)</span> <span class="op">{</span> <span class="kw">this</span><span class="op">.</span><span class="fu">id</span> <span class="op">=</span> id<span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getName</span><span class="op">()</span> <span class="op">{</span> <span class="cf">return</span> name<span class="op">;</span> <span class="op">}</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setName</span><span class="op">(</span><span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span> <span class="kw">this</span><span class="op">.</span><span class="fu">name</span> <span class="op">=</span> name<span class="op">;</span> <span class="op">}</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>There are a couple different strategies to assign a new Primary
Key:</p>
<ul>
<li>AUTO: Automatically choose strategy</li>
<li>IDENTITY: Relies on an auto-incremented column in the database</li>
<li>SEQUENCE: Utilizes a database sequence to generate primary key</li>
<li>TABLE: Requires an extra table to keep track of the next available
id</li>
</ul>
<h3 id="jpa-in-spring">2.2 JPA in Spring</h3>
<figure>
<img src="./img/jpa-config.png" alt="JPA configuration" />
<figcaption aria-hidden="true">JPA configuration</figcaption>
</figure>
<h4 id="jpa-repository">JPA Repository</h4>
<p>The <code>JpaRepository</code> is an interface that is a
CRUD-repository with extra functionalities for performing database
operations.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Typically defined in a single file (like ProductRepository.java)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> ProductRepository <span class="kw">extends</span> JpaRepository<span class="op">&lt;</span>Product<span class="op">,</span> <span class="bu">Long</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>      <span class="bu">List</span><span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findByCategory</span><span class="op">(</span><span class="bu">String</span> category<span class="op">);</span> <span class="co">// Optional custom user-defined queries</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Example usage of build-in queries:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">// ProductDao.java</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="at">@Service</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> ProductDao<span class="op">{</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="dt">final</span> ProductRepository repo<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="fu">ProductDao</span><span class="op">(</span>ProductRepository repository<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">repo</span> <span class="op">=</span> repository<span class="op">;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="bu">List</span><span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">getProductsByCategory</span><span class="op">(</span><span class="bu">String</span> category<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> productRepository<span class="op">.</span><span class="fu">findByCategory</span><span class="op">(</span>category<span class="op">);</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> Product <span class="fu">getProductById</span><span class="op">(</span><span class="dt">long</span> id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> repo<span class="op">.</span><span class="fu">findById</span><span class="op">(</span>id<span class="op">).</span><span class="fu">orElse</span><span class="op">(</span><span class="kw">null</span><span class="op">);</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">addProduct</span><span class="op">(</span>Product p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    repo<span class="op">.</span><span class="fu">save</span><span class="op">(</span>addProduct<span class="op">);</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>List of build-in methods:</p>
<ul>
<li><code>save</code>: save new object</li>
<li><code>findAll</code>: return all entities</li>
<li><code>findAllById</code>: return all with certain id</li>
<li><code>flush</code>: write changes to DB</li>
<li><code>saveAll</code>: Save list of objects</li>
<li><code>delete</code>, <code>deleteAll</code>: remove
entity/entities</li>
<li><code>existById</code>: does entity exist?</li>
</ul>
<blockquote>
<p>‚ö†Ô∏è: Using a JPA requires some configuration in
<code>application.properties</code></p>
</blockquote>
<pre class="text"><code>spring.datasource.url=jdbc:mysql://localhost:3306/dudosdb?serverTimezone=UTC
spring.datasource.username=TLuca
spring.datasource.password=&lt;redacted&gt;</code></pre>
            </div>
    </div>
  </div>
  <script src="https://vjs.zencdn.net/5.4.4/video.js"></script>

</body>
</html>
